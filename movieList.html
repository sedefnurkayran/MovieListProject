<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="css/style.css"/>
    <title>Movies</title>
<!-- 
    <style>
        body{
            padding: 20px;
            background-color: ghostwhite;
        }
        #movieList, #watchedList{
            margin-top: 20px;
        }
        .movie-image{
            width: 100px;
            height: 100px;
        }
        #btnAddMovie:hover{
           opacity: 1px;
           background-color: greenyellow;
        }
        #btnWatched:active{
            background-color: rgb(68, 47, 255);

        }
        #btnRemove:hover{
            background-color: rgba(213, 42, 222, 0.5);

        }
        .table th {
            justify-content: center;

        }
    </style> -->
</head>
<body>

    <div class="container">
        <div class="content  d-flex flex-column flex-column-fluid" id="kt_content">
            <!--begin::Subheader-->
<div class="subheader py-2 py-lg-6  subheader-solid " id="kt_subheader">
<div class=" container-fluid  d-flex align-items-center justify-content-between flex-wrap flex-sm-nowrap">
<!--begin::Info-->
<div class="d-flex align-items-center flex-wrap mr-1">

<!--begin::Page Heading-->
<div class="d-flex align-items-baseline flex-wrap mr-5">
<!--begin::Page Title-->
<h5 class="text-dark font-weight-bold my-1 mr-5">FILM ARSIVIM</h5>
<!--end::Page Title-->
</div>
<!--end::Page Heading-->
</div>
<!--end::Info-->

<!--begin::Toolbar-->
<div class="d-flex align-items-center">
</div>
<!--end::Toolbar-->
</div>
</div>
<!--end::Subheader-->

<!--begin::Entry-->
<div class="d-flex flex-column-fluid">
<!--begin::Container-->
<div class=" container ">
<!-- begin::Card-->
<div class="card card-custom overflow-hidden">
<div class="card-body p-0">


<!-- begin: Invoice body-->
<div class="row justify-content-center py-8 px-8 py-md-10 px-md-0">
<div class="col-md-7">

    <div class="mb-3 mt-4">
        <label for="movieName" class="form-label">Film Adı:</label>
        <input type="text" class="form-control" id="movieName"> 
    </div>

    <div class="mb-3">
        <label for="imageUrl" class="form-label">Film URL:</label>
        <input type="text" class="form-control" id="imageUrl">
    </div>

    <button class="btn btn-success" id="btnAddMovie" onclick="addMovie()">Filmi Ekle</button>
    

<div class="table-responsive" id="movieList">
<table class="table">
<thead>
<tr>
<th class="pl-0 font-weight-bold text-muted  text-uppercase">IZLENECEK FILMLER</th>
<th class="px-8"></th>
<th class="px-8"></th>
<th class="px-8"></th>
<th class="px-8"></th>
<th class="px-8"></th>
<th class="px-8"></th>
<th class="px-8"></th>
<th class="px-8"></th>
<th class="text-right font-weight-bold text-muted text-uppercase">ISLEM</th>
</tr>
</thead>
<tbody>
</tbody>
</table>
</div>

<div class="table-responsive" id="watchedList">
    <table class="table">
    <thead>
    <tr>
    <th class="pl-0 font-weight-bold text-muted  text-uppercase">IZLENEN FILMLER</th>
    <th class="d-flex justify-content-center font-weight-bold text-muted text-uppercase">FILM ADI</th>
    <th class="text-right text-muted text-uppercase">YORUM</th>
    <th class="text-right font-weight-bold text-muted text-uppercase">ISLEM</th>
    </tr>
    </thead>
    </table>
    </div>
</div>
</div>
<!-- end: Invoice body-->

<!-- end: Invoice-->
</div>
</div>
<!-- end::Card-->
</div>
<!--end::Container-->
</div>
<!--end::Entry-->
</div>

<footer>
    <p class="mt-5">&copy;2024 Javascript Projesi</p>
</footer>

        </div>
    </div>
    

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        function addMovie(){

            var movieName = document.getElementById('movieName').value;
            var imageUrl = document.getElementById('imageUrl').value;

            if(movieName.trim() === '' || imageUrl.trim() === ''){
                alert('Lütfen film adı ve resim URL\si girin.');
                return;
            }

            var movieList = document.getElementById('movieList');
            var listItem = document.createElement('div');
            listItem.className = 'd-flex justify-content-between align-items-center border-bottom mb-2';

            var movieContent = document.createElement('div');
            movieContent.className = 'd-flex align-items-center';

            var movieImage = document.createElement('img');
            movieImage.src = imageUrl;
            movieImage.alt = movieName;
            movieImage.className = 'movie-image me-2';

            var movieTitle = document.createElement('span');
            movieTitle.textContent = movieName;
            movieTitle.className = 'movie-title'; // movieTitle için sınıf

            movieContent.appendChild(movieImage);
            movieContent.appendChild(movieTitle);

            var buttons = document.createElement('div');
            // buttons.innerHTML = 
            // `<button class= "btn btn-success me-2" id="btnWatched"
            // onclick="watchedMovie(this)">İzlendi</button>
            // <button class= "btn btn-danger me-2" id="btnRemove" onclick="removeMovie(this)">Kaldır</button>
            // `;

           
            var buttons = document.createElement('div');
            buttons.innerHTML = `
            <button class="btn btn-success me-2" id="btnWatched" onclick="watchedMovie(this)">
                <span class="svg-icon svg-icon-muted svg-icon-2hx">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect opacity="0.3" x="2" y="2" width="20" height="20" rx="5" fill="currentColor"/>
                        <path d="M10.4343 12.4343L8.75 10.75C8.33579 10.3358 7.66421 10.3358 7.25 10.75C6.83579 11.1642 6.83579 11.8358 7.25 12.25L10.2929 15.2929C10.6834 15.6834 11.3166 15.6834 11.7071 15.2929L17.25 9.75C17.6642 9.33579 17.6642 8.66421 17.25 8.25C16.8358 7.83579 16.1642 7.83579 15.75 8.25L11.5657 12.4343C11.2533 12.7467 10.7467 12.7467 10.4343 12.4343Z" fill="currentColor"/>
                    </svg>
                </span>
                İzlendi
                </button>
                <button class= "btn btn-danger me-2" id="btnRemove" onclick="removeMovie(this)">
                <span class="svg-icon svg-icon-muted svg-icon-2hx"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect opacity="0.3" x="2" y="2" width="20" height="20" rx="5" fill="currentColor"/>
                        <rect x="6.0104" y="10.9247" width="12" height="2" rx="1" fill="currentColor"/>
                        </svg>
                    </span>
                    Kaldır    
                </button>`;
        
            /////////////////

            listItem.appendChild(movieContent);
            listItem.appendChild(buttons);

            movieList.appendChild(listItem);

            document.getElementById('movieName').value='';
            document.getElementById('imageUrl').value='';
        }

        function watchedMovie(button){

            var listItem = button.parentNode.parentNode; //butonun 2 üst elemanina ulasir.

            var watchedList = document.getElementById('watchedList');

            var emotion = prompt('Filmle alakalı görüşlerinizi yazınız:');
            if(emotion.trim() === '')
             {
                 alert('Lütfen bir yorum yaziniz.');
                return;
             }

            var movieContent = listItem.querySelector('.d-flex .align-items-center'); //querySelector metodu, belirtilen seçiciye uyan ilk elementi döner.

            var movieImage = movieContent.querySelector('.movie-image');

          //var movieTitle = listItem.querySelector('.movie-title');
            var movieTitle = movieContent.querySelector('.movie-title');

            var smallImage = movieImage.cloneNode();
            smallImage.className = 'movie-image me-2';

            listItem.innerHTML = '';
            listItem.appendChild(smallImage);

            //ADDING MOVIE TITLE       
            var watchedMovieTitle = movieTitle.cloneNode(true); // reached children(descendants)
           //watchedMovieTitle.className= 'movie-title'
            listItem.appendChild(watchedMovieTitle);
        
           //var watchedMovieTitle = movieTitle.cloneNode(false); // only the node copies. 
           //watchedMovieTitle.textContent = movieTitle.textContent; // It copies content manually
           //listItem.appendChild(watchedMovieTitle);


            listItem.innerHTML+= `<span>${emotion}</span>`;

       

            var removeButton = document.createElement('div');
            removeButton.innerHTML = 
            `<button class= "btn btn-danger me-2" id="btnRemove" onclick="removeMovie(this)">Kaldır</button>`;
            listItem.appendChild(removeButton);

         
            watchedList.appendChild(listItem);

            button.parentNode.innerHTML =  '<span class="text-success">İzlendi</span>'
        }

        function removeMovie(button){
            var listItem = button.parentNode.parentNode;
            listItem.remove();
        }
    </script>
</body>
</html>